let initialProducts=[];readTextFile("./data/items.json",function(e){initialProducts=JSON.parse(e)});let checkbox=document.getElementById("check"),products=initialProducts;function checkCheckbox(){console.log(checkbox.checked),products=checkbox.checked?initialProducts.filter(e=>!0===e.available):initialProducts,reloadData()}let html='<div id="wrapper" class="wrapper">\n  <div class="wrapper__title"></div>\n  <div class="wrapper__img-card">\n    <img id="product-img" class="wrapper__product" alt="/"\n         src="https://d37kg2ecsrm74.cloudfront.net/web/ikea4/images/382/0238233_PE377690_S5.jpg">\n  </div>\n  <div class="wrapper__description"></div>\n  <span class="wrapper__price"></span>\n  <div class="wrapper__available"></div>\n  <div class="wrapper__bask-block">\n    <button class="wrapper__btn">Добавить в корзину</button>\n    <span class="wrapper__counter"></span>\n  </div>\n</div>',container=document.getElementById("container"),counter=0,updateCounter=!0,cartData=getCartData()||{};const populateWrapper=function(e){let t=document.createElement("div");t.innerHTML=html,t.getElementsByClassName("wrapper__title")[0].innerHTML=e.title,t.getElementsByClassName("wrapper__product")[0].src=e.image,t.getElementsByClassName("wrapper__description")[0].innerHTML=e.description,t.getElementsByClassName("wrapper__price")[0].innerHTML=e.price+" руб.",t.getElementsByClassName("wrapper__btn")[0].setAttribute("data-id",e.id),cartData.hasOwnProperty(e.id)&&(t.getElementsByClassName("wrapper__counter")[0].innerHTML=cartData[e.id][2]);let a="Товар в наличии";e.available||(a="Товара нет в наличии"),t.getElementsByClassName("wrapper__available")[0].innerHTML=a,container.appendChild(t),updateCounter&&counter++};function loadData(){products.slice(0,15).forEach(populateWrapper)}function loadMore(){products.slice(counter,counter+15).forEach(populateWrapper)}function reloadData(){for(;container.firstChild;)container.removeChild(container.firstChild);updateCounter=!1,products.slice(0,counter).forEach(populateWrapper),updateCounter=!0}function sortByName(e,t="asc"){return function(a,r){if(!a.hasOwnProperty(e)||!r.hasOwnProperty(e))return 0;let n=0;return a[e]instanceof String||"string"==typeof a[e]?n=a[e].localeCompare(r[e],"ru"):(a[e]instanceof Number||"number"==typeof a[e])&&(n=a[e]>r[e]),"desc"===t?-1*n:n}}function sortBy(e,t="asc"){products.sort(sortByName(e,t)),reloadData()}window.addEventListener("load",function(){loadData()});